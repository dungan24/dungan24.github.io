{{ if .Page.Params.chartData }}
{{ if not (.Page.Scratch.Get "chartsRendered") }}
{{ .Page.Scratch.Set "chartsRendered" true }}
<div class="w-full" id="market-charts-root" data-chart-data-url="{{ .Page.Params.chartData }}">
  <div class="market-chart-card" id="charts-status-container" data-label="Loading">
    <div class="chart-loading-state" id="charts-loading-ui">
      <div class="chart-spinner"></div>
      <span>Loading market data...</span>
    </div>
  </div>

  <div class="hidden" id="charts-content">
    <div class="market-chart-card" data-label="Trend">
      <h3 class="chart-title-compact">ğŸ“ˆ ì£¼ìš” ì§€í‘œ ì¶”ì´</h3>
      <div class="chart-box is-timeseries" id="chart-timeseries"></div>
    </div>

    <div class="mp-chart-grid-2col">
      <div class="market-chart-card" data-label="Correlation">
        <h3 class="chart-title-compact">ğŸ”— ìì‚° ê°„ ìƒê´€ê´€ê³„</h3>
        <div class="chart-box is-correlation" id="chart-correlations"></div>
      </div>

      <div class="market-chart-card" data-label="Regime">
        <h3 class="chart-title-compact">ğŸ¯ ì‹œì¥ êµ­ë©´ (Regime)</h3>
        <div class="chart-box is-regime" id="chart-regime"></div>
      </div>
    </div>

    <div class="mp-chart-grid-2col" id="sector-charts-grid">
      <div class="market-chart-card" data-label="US Sectors">
        <h3 class="chart-title-compact">US ì„¹í„° ìƒëŒ€ê°•ë„</h3>
        <div class="chart-box" id="chart-sectors-us"></div>
      </div>
      <div class="market-chart-card" data-label="KR Sectors">
        <h3 class="chart-title-compact">KR ì„¹í„° ìƒëŒ€ê°•ë„</h3>
        <div class="chart-box" id="chart-sectors-kr"></div>
      </div>
    </div>
  </div>
</div>

<script src="{{ "js/render-charts.js" | relURL }}"></script>
<script src="{{ "js/market-charts-loader.js" | relURL }}"></script>
{{ end }}
{{ end }}
