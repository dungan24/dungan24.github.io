{{/* news-grid: 뉴스를 카드 그리드로 보여주는 쇼트코드 */}}
<div class="mp-news-grid">
  {{ $items := split .Inner "---" }}
  {{ range $items }}
    {{ $content := strings.TrimSpace . }}
    {{ if $content }}
      {{ $lines := split $content "\n" }}
      {{ $headlineLine := "" }}
      {{ $metaLine := "" }}
      {{ $originalLine := "" }}
      
      {{/* 첫 번째 유효한 줄을 헤드라인으로 잡기 */}}
      {{ range $lines }}
        {{ if and (not $headlineLine) (strings.TrimSpace .) }}
          {{ $headlineLine = strings.TrimSpace . }}
        {{ else if and $headlineLine (not $metaLine) (strings.TrimSpace .) }}
          {{ $metaLine = strings.TrimSpace . }}
        {{ else if and $metaLine (not $originalLine) (strings.TrimSpace .) }}
          {{ $originalLine = strings.TrimSpace . }}
        {{ end }}
      {{ end }}

      {{ if $headlineLine }}
      {{ $headline := $headlineLine | replaceRE `^[\d\.\s*]+` "" | strings.TrimSpace }}
      <div class="mp-news-card">
        <div class="mp-news-card__headline">
          {{ $headline | markdownify }}
        </div>
        {{ if $metaLine }}
        <div class="mp-news-card__meta">
          {{ $metaLine | markdownify }}
        </div>
        {{ end }}
        {{ if $originalLine }}
        <div class="mp-news-card__original">
          {{ $originalLine | markdownify }}
        </div>
        {{ end }}
      </div>
      {{ end }}

    {{ end }}
  {{ end }}
</div>
