{{/* ticker-group: 티커들을 그리드 형태로 보여주는 쇼트코드 */}}
<div class="mp-ticker-groups">
  {{ $lines := split .Inner "\n" }}
  {{ range $lines }}
    {{ $line := strings.TrimSpace . }}
    {{ if and $line (strings.Contains $line "|") }}
      {{ $parts := split $line "|" }}
      {{ if ge (len $parts) 2 }}
        {{ $name := index $parts 0 | strings.TrimSpace }}
        {{ $price := index $parts 1 | strings.TrimSpace }}
        {{ $change := "" }}{{ if ge (len $parts) 3 }}{{ $change = index $parts 2 | strings.TrimSpace }}{{ end }}
        {{ $flow := "" }}{{ if ge (len $parts) 4 }}{{ $flow = index $parts 3 | strings.TrimSpace }}{{ end }}
        
        {{ $colorClass := "" }}
        {{ if strings.Contains $change "+" }}{{ $colorClass = "num-up" }}{{ else if strings.Contains $change "-" }}{{ $colorClass = "num-down" }}{{ end }}
        
        <div class="mp-ticker-row is-card">
          <span class="mp-ticker-name">{{ $name }}</span>
          <div class="mp-ticker-data">
            <span class="mp-ticker-price">{{ $price }}</span>
            {{ if or $change $flow }}
            <div class="mp-ticker-meta">
              <span class="mp-ticker-change {{ $colorClass }}">{{ $change }}</span>
              {{ if $flow }}<span class="mp-ticker-flow">{{ $flow }}</span>{{ end }}
            </div>
            {{ end }}
          </div>
        </div>

      {{ end }}
    {{ end }}
  {{ end }}
</div>
