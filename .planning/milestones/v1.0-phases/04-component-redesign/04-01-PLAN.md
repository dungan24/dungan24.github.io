---
phase: 04-component-redesign
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - assets/css/custom/briefing-sections.css
  - static/js/briefing/news-grid.js
autonomous: true
requirements:
  - NEWS-01
  - NEWS-02
  - NEWS-03
  - NEWS-04

must_haves:
  truths:
    - "뉴스 카드가 글래스 스타일 배경(opaque rgba)과 테두리/그림자로 표시된다"
    - "카테고리별(시장 이벤트, 미국 매크로, 원자재 등) 서로 다른 색상 뱃지가 소스 영역에 적용되어 있다"
    - "뉴스 카드에 마우스를 올리면 테두리 색상과 그림자가 변한다"
    - "640px 이하 모바일에서 뉴스 카드가 1열로 표시된다"
  artifacts:
    - path: "assets/css/custom/briefing-sections.css"
      provides: "뉴스 카드 글래스 스타일, 카테고리 색상, 호버 효과, 모바일 1열 레이아웃"
      contains: "is-cat-market"
    - path: "static/js/briefing/news-grid.js"
      provides: "카테고리 문자열 → CSS 클래스 매핑 룩업 테이블"
      contains: "CATEGORY_CLASS_MAP"
  key_links:
    - from: "static/js/briefing/news-grid.js"
      to: "assets/css/custom/briefing-sections.css"
      via: "card.classList.add(getCategoryClass(category))"
      pattern: "classList\\.add.*getCategoryClass"
---

<objective>
뉴스 카드 글래스 리디자인: backdrop-filter 제거(opaque rgba 전환) + 카테고리 뱃지 색상 + 모바일 1열 레이아웃

Purpose: 뉴스 카드가 글래스 디자인 시스템에 맞게 리디자인되고, 카테고리별 시각 구분이 가능하며, 모바일에서 읽기 좋은 레이아웃이 된다.
Output: 수정된 briefing-sections.css + news-grid.js
</objective>

<execution_context>
@C:/Users/sc/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/sc/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-component-redesign/04-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: 뉴스 카드 글래스 스타일 교정 + 카테고리 CSS + 모바일 브레이크포인트 (NEWS-01, NEWS-02, NEWS-03, NEWS-04)</name>
  <files>assets/css/custom/briefing-sections.css, static/js/briefing/news-grid.js</files>
  <action>
**Part A — JS: 카테고리 룩업 테이블 + classList 주입 (news-grid.js)**

IIFE 최상단(`var ns = ...` 바로 아래)에 카테고리 매핑 테이블과 헬퍼 함수를 추가한다:

```javascript
var CATEGORY_CLASS_MAP = {
  '시장 이벤트': 'is-cat-market',
  '미국 매크로': 'is-cat-macro',
  '원자재': 'is-cat-commodity',
  'central-bank': 'is-cat-central-bank',
  '연준': 'is-cat-central-bank',
  '기업': 'is-cat-corporate',
  '한국 매크로': 'is-cat-kr-macro',
  '크립토': 'is-cat-crypto',
  '외환': 'is-cat-fx',
  '지정학': 'is-cat-geopolitical'
};

function getCategoryClass(cat) {
  return CATEGORY_CLASS_MAP[cat] || 'is-cat-other';
}
```

`card.innerHTML = ...` 줄 바로 아래, `grid.appendChild(card)` 직전에:
```javascript
if (category) {
  card.classList.add(getCategoryClass(category));
}
```

주의: 기존 파싱 로직(`metaParts[2]`)은 건드리지 않는다. category 변수가 이미 line 65에서 추출되고 있다.

**Part B — CSS: backdrop-filter 제거 + opaque rgba 교체 (NEWS-01)**

`.mp-news-card` 규칙에서 `backdrop-filter`와 `-webkit-backdrop-filter` 두 줄을 삭제한다.
이유: `.mp-news-card`는 `.briefing-section`의 자식이고, `.briefing-section`이 이미 backdrop-filter를 가지고 있다. 내부 카드에 backdrop-filter 금지 원칙(pre-Phase 1 결정).

`background: var(--mp-glass-bg)` 를 유지한다 — `--mp-glass-bg`는 dark mode에서 `rgba(18,18,42,0.72)`이고 이 opacity면 충분히 opaque하다.

**Part C — CSS: 카테고리별 뱃지 색상 (NEWS-02)**

`.mp-news-card__source` 규칙 블록 아래에 카테고리별 소스 뱃지 색상을 추가한다:

```css
/* Category accent colors on source badge */
.mp-news-card.is-cat-market .mp-news-card__source {
  color: var(--mp-neon-cyan);
  background: rgba(0, 240, 255, 0.1);
  border-color: rgba(0, 240, 255, 0.25);
}
.mp-news-card.is-cat-macro .mp-news-card__source {
  color: var(--mp-neon-purple);
  /* 기본값과 동일 — 명시적 선언으로 유지 */
}
.mp-news-card.is-cat-commodity .mp-news-card__source {
  color: var(--mp-neon-yellow);
  background: rgba(255, 214, 0, 0.1);
  border-color: rgba(255, 214, 0, 0.25);
}
.mp-news-card.is-cat-central-bank .mp-news-card__source {
  color: var(--mp-neon-rose);
  background: rgba(244, 63, 94, 0.1);
  border-color: rgba(244, 63, 94, 0.25);
}
.mp-news-card.is-cat-corporate .mp-news-card__source {
  color: var(--mp-neon-green);
  background: rgba(0, 255, 136, 0.1);
  border-color: rgba(0, 255, 136, 0.25);
}
.mp-news-card.is-cat-kr-macro .mp-news-card__source {
  color: var(--mp-neon-blue);
  background: rgba(51, 136, 255, 0.1);
  border-color: rgba(51, 136, 255, 0.25);
}
.mp-news-card.is-cat-crypto .mp-news-card__source {
  color: #E879F9;
  background: rgba(232, 121, 249, 0.1);
  border-color: rgba(232, 121, 249, 0.25);
}
.mp-news-card.is-cat-fx .mp-news-card__source {
  color: var(--mp-neon-cyan);
  background: rgba(0, 240, 255, 0.08);
  border-color: rgba(0, 240, 255, 0.2);
}
.mp-news-card.is-cat-geopolitical .mp-news-card__source {
  color: #FB923C;
  background: rgba(251, 146, 60, 0.1);
  border-color: rgba(251, 146, 60, 0.25);
}
```

**Part D — CSS: 라이트 모드 카테고리 오버라이드 (NEWS-02 light mode)**

기존 `:root:not(.dark)` 뉴스 카드 블록 근처에 라이트 모드 카테고리 색상을 추가한다.
라이트 모드에서 네온 색상은 가독성이 떨어지므로 darker/saturated 값 사용:

```css
:root:not(.dark) .mp-news-card.is-cat-market .mp-news-card__source {
  color: #0891B2;
  background: rgba(8, 145, 178, 0.08);
  border-color: rgba(8, 145, 178, 0.2);
}
:root:not(.dark) .mp-news-card.is-cat-commodity .mp-news-card__source {
  color: #B45309;
  background: rgba(180, 83, 9, 0.08);
  border-color: rgba(180, 83, 9, 0.2);
}
:root:not(.dark) .mp-news-card.is-cat-central-bank .mp-news-card__source {
  color: #BE123C;
  background: rgba(190, 18, 60, 0.08);
  border-color: rgba(190, 18, 60, 0.2);
}
:root:not(.dark) .mp-news-card.is-cat-corporate .mp-news-card__source {
  color: #059669;
  background: rgba(5, 150, 105, 0.08);
  border-color: rgba(5, 150, 105, 0.2);
}
:root:not(.dark) .mp-news-card.is-cat-kr-macro .mp-news-card__source {
  color: #2563EB;
  background: rgba(37, 99, 235, 0.08);
  border-color: rgba(37, 99, 235, 0.2);
}
:root:not(.dark) .mp-news-card.is-cat-crypto .mp-news-card__source {
  color: #A21CAF;
  background: rgba(162, 28, 175, 0.08);
  border-color: rgba(162, 28, 175, 0.2);
}
:root:not(.dark) .mp-news-card.is-cat-geopolitical .mp-news-card__source {
  color: #C2410C;
  background: rgba(194, 65, 12, 0.08);
  border-color: rgba(194, 65, 12, 0.2);
}
```

(macro와 fx는 기본값과 동일하거나 충분히 가독성이 있으므로 별도 light override 불필요)

**Part E — CSS: 호버 효과 확인 (NEWS-03)**

기존 `.mp-news-card:hover` 규칙이 이미 `border-color: rgba(0,240,255,0.4)` + `box-shadow: 0 0 15px rgba(0,240,255,0.15)` + `transform: translateY(-1px)` 을 갖고 있다.
이 상태 그대로 유지한다. NEWS-03 요건 충족됨.

추가: 라이트 모드 호버 오버라이드가 없다면 추가:
```css
:root:not(.dark) .mp-news-card:hover {
  border-color: rgba(8, 145, 178, 0.4);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
}
```

**Part F — CSS: 모바일 1열 레이아웃 (NEWS-04)**

파일 하단 또는 `.mp-news-grid` 규칙 근처에 추가:
```css
@media (max-width: 640px) {
  .mp-news-grid {
    grid-template-columns: 1fr;
  }
}
```

**주의사항:**
- 컴포넌트 파일(briefing-sections.css)에 `:root {}` 변수 선언 블록을 추가하지 말 것 — custom.css만 선언 가능 (Phase 1 결정)
- `@media (prefers-color-scheme: dark)` 사용 금지 — `.dark` 클래스만 사용 (프로젝트 결정)
- news-grid.js에 `window.MP_*` 새 전역 변수 추가 금지 — IIFE 스코프 내에서만 (연구 지침)
  </action>
  <verify>
1. Hugo 빌드 확인: `hugo --gc --minify 2>&1 | tail -5` (에러 0)
2. news-grid.js에 CATEGORY_CLASS_MAP 존재 확인: `grep "CATEGORY_CLASS_MAP" static/js/briefing/news-grid.js`
3. briefing-sections.css에 backdrop-filter가 .mp-news-card에 없는 것 확인: `grep -A2 "\.mp-news-card {" assets/css/custom/briefing-sections.css` (backdrop-filter 없어야 함)
4. 모바일 브레이크포인트 확인: `grep "max-width: 640px" assets/css/custom/briefing-sections.css`
5. 카테고리 CSS 확인: `grep "is-cat-market" assets/css/custom/briefing-sections.css`
  </verify>
  <done>
- .mp-news-card에 backdrop-filter가 제거되고 opaque rgba 배경만 사용
- CATEGORY_CLASS_MAP이 news-grid.js에 존재하고 카드에 카테고리 클래스가 주입됨
- briefing-sections.css에 카테고리별(market/macro/commodity/central-bank/corporate/kr-macro/crypto/fx/geopolitical) 뱃지 색상이 dark/light 모두 정의됨
- 640px 이하에서 .mp-news-grid가 1열로 전환됨
- 라이트 모드 호버 오버라이드 존재
  </done>
</task>

</tasks>

<verification>
1. Hugo 빌드 성공 (에러 0)
2. DevTools로 뉴스 카드 검사: backdrop-filter 속성이 없고 background만 적용됨
3. 카테고리별 뱃지 색상이 다름 (시장 이벤트=cyan, 미국 매크로=purple, 원자재=yellow, central-bank=rose)
4. 640px viewport에서 1열 레이아웃
5. 카드 호버 시 border+shadow 변화
</verification>

<success_criteria>
- NEWS-01: 뉴스 카드가 opaque rgba 배경 + glass 테두리/그림자로 표시된다
- NEWS-02: 카테고리마다 서로 다른 소스 뱃지 색상이 적용된다
- NEWS-03: 호버 시 테두리 색상과 그림자 변화가 있다
- NEWS-04: 640px 이하에서 1열 그리드로 전환된다
</success_criteria>

<output>
After completion, create `.planning/phases/04-component-redesign/04-01-SUMMARY.md`
</output>
